name: DEPLOY TO SERVER

on: [push, pull_request]

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3

      - name: Install SSH Client
        run: sudo apt-get install -y openssh-client

      - name: Deploy to Server
        run: |
          sshpass -p "${{ secrets.PW_HOSTING }}" ssh -o StrictHostKeyChecking=no -p ${{ secrets.PORT_HOSTING }} ${{ secrets.USER_HOSTING }}@${{ secrets.DOMAIN_HOSTING }} << 'EOF'
          cd /home/rshincar/admin.rshincaresurabaya.com
          git pull https://github.com/muhfarkhans/rsh.git       
          EOF
